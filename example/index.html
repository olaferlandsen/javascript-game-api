<html>
<head>
    <title>Javascript Game API</title>
    <meta charset="utf-8">
    <script src="../dist/javascript-game-api.js"></script>
    <script src="bower_components/angular/angular.min.js"></script>
	<script src="bower_components/angular-animate/angular-animate.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
	<link href="bower_components/animate.css/animate.min.css" rel="stylesheet">
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="css/example.css" rel="stylesheet">
	<meta name="viewport" content="width=device-width, user-scalable=no">

</head>
    <body ng-app="game">
        <div class="container" ng-controller="gameCtrl">
	        <div class="col-md-8">
		        <div class="panel">
			        <div class="panel-heading">
				        <h3>Market</h3>
			        </div>
			        <div class="panel-body">
				        <table class="table-bordered table table-striped">
					        <tbody class="market">
					            <tr ng-repeat="item in items" class="item">
						            <td>{{ item.name }}</td>
						            <td>${{ item.price | number }}</td>
						            <td><a ng-click="buy($index)" class="btn btn-success btn-block">Buy</a></td>
					            </tr>
					        </tbody>
				        </table>
			        </div>
		        </div>
	        </div>
            <div class="col-md-4">
                <div class="panel" ng-class="{ 'panel-danger' : me.isDead() }">
                    <div class="panel-heading"><h3>{{ me.getName() }}</h3></div>
                    <div class="panel-body text-center">
                        <div class="progress">
                            <div
                                class="progress-bar "
                                ng-class="{ 'progress-bar-danger' : me.getLifePercentage() < 30, 'progress-bar-success' : me.getLifePercentage() > 30}"
                                role="progressbar"
                                aria-valuenow="100"
                                aria-valuemin="0"
                                aria-valuemax="100"
                                ng-style="{ 'width' : me.getLifePercentage() +'%' }">
                                <span class="sr-only">{{me.getLifePercentage()}}% Complete</span>
                            </div>
                        </div>
	                    <table class="table table-bordered">
		                    <tbody>
			                    <tr>
				                    <td colspan="2"><strong>Life</strong></td>
				                    <td colspan="2">{{ me.getLife() | number:0 }} / {{ me.getLifePercentage() | number : 0 }}%</td>

			                    </tr>
			                    <tr>
				                    <td><strong>Level</strong></td>
				                    <td>{{ me.getLevel() }}</td>

				                    <td><strong>Exp.</strong></td>
				                    <td>{{ me.getExperience() | number }}</td>
			                    </tr>
			                    <tr>
				                    <td><strong>Attack</strong></td>
				                    <td>{{ me.getAttack() }}</td>

				                    <td><strong>Defense</strong></td>
				                    <td>{{ me.getDefense() | number }}</td>
			                    </tr>
		                    </tbody>
	                    </table>

	                    <table class="table table-bordered">
		                    <thead>
		                        <tr>
			                        <th colspan="3">Inventory</th>
			                        <th align="right" class="text-right">${{ me.getGold() }}</th>
		                        </tr>
		                    </thead>
		                    <tbody>
		                        <tr ng-if="me.inventory.all().length > 0">
			                        <td>Name</td>
			                        <td>Att.</td>
			                        <td>Def.</td>
			                        <td>Cri.</td>
		                        </tr>
			                    <tr ng-repeat="item in me.inventory.all()">
				                    <td><strong>{{item.name}}</strong></td>
				                    <td>{{ item.attack || 0| number}}</td>
				                    <td>{{ item.defense || 0| number }}</td>
				                    <td>{{ (item.critical|| 0) | number}}</td>
			                    </tr>
		                    </tbody>
	                    </table>
                    </div>
                </div>
            </div>
	        <!-- Enemies -->
            <div class="col-md-4 col-xs-12" ng-repeat="enemy in enemies">
                <div class="panel" ng-class="{ 'panel-danger' : enemy.isDead() }">
                    <div class="panel-heading"><h3>{{ enemy.getName() }}</h3></div>
                    <div class="panel-body text-center">
                        <div class="progress">
                            <div
                                    class="progress-bar "
                                    ng-class="{ 'progress-bar-danger' : enemy.getLifePercentage() < 30, 'progress-bar-success' : enemy.getLifePercentage() > 30}"
                                    role="progressbar"
                                    aria-valuenow="100"
                                    aria-valuemin="0"
                                    aria-valuemax="100"
                                    ng-style="{ 'width' : enemy.getLifePercentage() +'%' }">
                                <span class="sr-only">{{enemy.getLifePercentage()}}% Complete</span>
                            </div>
                        </div>
                        <table class="table table-bordered">
                            <thead>

                            </thead>
                            <tbody>
                            <tr>
                                <td colspan="2"><strong>Life</strong></td>
                                <td colspan="2">{{ enemy.getLife() | number  }}</td>
                            </tr>
                            <tr>
                                <td><strong>Level</strong></td>
                                <td>{{ enemy.getLevel() }}</td>

                                <td><strong>Exp.</strong></td>
                                <td>{{ enemy.getExperience() | number }}</td>
                            </tr>

                            <tr>
                                <td><strong>Attack</strong></td>
                                <td>{{ enemy.getAttack() }}</td>

                                <td><strong>Defense</strong></td>
                                <td>{{ enemy.getDefense() | number }}</td>
                            </tr>
                            </tbody>
                        </table>

                        <button
                            type="button"
                            ng-click="attackTo(enemy)"
                            class="btn btn-lg btn-block btn-danger"
                            ng-disabled="enemy.isDead() || me.isDead()">Attack</button>

                    </div>
                </div>
            </div>

	        <div class="message blocked">
		        <h3>BLOCKED!</h3>
	        </div>
	        <div class="message hit">
		        <h3>HIT!</h3>
	        </div>
	        <div class="message kill">
		        <h3>ENEMY DEAD!</h3>
	        </div>
	        <div class="message miss">
		        <h3>MISS!!</h3>
	        </div>
	        <div class="message dead">
		        <h3>YOU ARE DEAD!</h3>
	        </div>

        </div>



    </body>
</html>