<html>
<head>
    <title>Javascript Game API</title>
    <meta charset="utf-8">
    <script src="../dist/javascript-game-api.js"></script>
    <script src="bower_components/angular/angular.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>

    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
    <body ng-app="game">
        <div class="container" ng-controller="gameCtrl">
	        <div class="col-md-4">
		        <div class="panel">
			        <div class="panel-heading">
				        <h3>Market</h3>
			        </div>
			        <div class="panel-body">
				        <table class="table-bordered table">
					        <tbody>

					            <tr ng-repeat="item in items">
						            <td>{{ item.name }}</td>
						            <td>${{ item.price | number }}</td>
						            <td><a ng-click="buy($index)" class="btn btn-success">Comprar</a></td>
					            </tr>

					        </tbody>
				        </table>
			        </div>
		        </div>
	        </div>
            <div class="col-md-4">
                <div class="panel" ng-class="{ 'panel-danger' : me.isDead() }">
                    <div class="panel-heading"><h3>{{ me.getName() }}</h3></div>
                    <div class="panel-body text-center">
                        <div class="progress">
                            <div
                                class="progress-bar "
                                ng-class="{ 'progress-bar-danger' : me.getLifePercentage() < 30, 'progress-bar-success' : me.getLifePercentage() > 30}"
                                role="progressbar"
                                aria-valuenow="100"
                                aria-valuemin="0"
                                aria-valuemax="100"
                                ng-style="{ 'width' : me.getLifePercentage() +'%' }">
                                <span class="sr-only">{{me.getLifePercentage()}}% Complete</span>
                            </div>
                        </div>
	                    <table class="table table-bordered">
		                    <tbody>
			                    <tr>
				                    <td><strong>Life</strong></td>
				                    <td>{{ me.getLife() | number:0 }} / {{ me.getLifePercentage() | number : 0 }}%</td>

				                    <td><strong>Asesinatos</strong></td>
				                    <td>{{ me.statistics.kills | number :0 }}</td>
			                    </tr>
			                    <tr>
				                    <td><strong>Level</strong></td>
				                    <td>{{ me.getLevel() }}</td>

				                    <td><strong>Exp.</strong></td>
				                    <td>{{ me.getExperience() | number }}</td>
			                    </tr>
			                    <tr>
				                    <td><strong>Attack</strong></td>
				                    <td>{{ me.getAttack() }}</td>

				                    <td><strong>Defense</strong></td>
				                    <td>{{ me.getDefense() | number }}</td>
			                    </tr>
			                    <tr>
				                    <td><strong>Gold</strong></td>
				                    <td>{{ me.getGold() }}</td>
			                    </tr>
		                    </tbody>
	                    </table>

	                    <table class="table table-bordered">
		                    <thead>
		                        <tr>
			                        <th colspan="5">Inventario</th>
		                        </tr>
		                    </thead>
		                    <tbody>
			                    <tr ng-repeat="item in me.inventory.all()">
				                    <td><strong>{{item.name}}</strong></td>
				                    <td>{{ item.attack | number}}</td>
				                    <td>{{ item.defense | number }}</td>
				                    <td>{{ (item.critical|| 0) | number}}</td>
				                    <td><a ng-click="" class="btn btn-warning">Tirar</a></td>
			                    </tr>
		                    </tbody>
	                    </table>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-xs-4" ng-repeat="enemy in enemies">
                <div class="panel" ng-class="{ 'panel-danger' : enemy.isDead() }">
                    <div class="panel-heading"><h3>{{ enemy.getName() }}</h3></div>
                    <div class="panel-body text-center">
                        <div class="progress">
                            <div
                                    class="progress-bar "
                                    ng-class="{ 'progress-bar-danger' : enemy.getLifePercentage() < 30, 'progress-bar-success' : enemy.getLifePercentage() > 30}"
                                    role="progressbar"
                                    aria-valuenow="100"
                                    aria-valuemin="0"
                                    aria-valuemax="100"
                                    ng-style="{ 'width' : enemy.getLifePercentage() +'%' }">
                                <span class="sr-only">{{enemy.getLifePercentage()}}% Complete</span>
                            </div>
                        </div>
                        <table class="table table-bordered">
                            <thead>

                            </thead>
                            <tbody>
                            <tr>
                                <td colspan="2"><strong>Life</strong></td>
                                <td colspan="2">{{ enemy.getLife() }}</td>
                            </tr>
                            <tr>
                                <td><strong>Level</strong></td>
                                <td>{{ enemy.getLevel() }}</td>

                                <td><strong>Exp.</strong></td>
                                <td>{{ enemy.getExperience() | number }}</td>
                            </tr>

                            <tr>
                                <td><strong>Attack</strong></td>
                                <td>{{ enemy.getAttack() }}</td>

                                <td><strong>Defense</strong></td>
                                <td>{{ enemy.getDefense() | number }}</td>
                            </tr>
                            </tbody>
                        </table>

                        <button
                            type="button"
                            ng-click="attackTo(enemy)"
                            class="btn btn-lg btn-block btn-danger"
                            ng-disabled="enemy.isDead() || me.isDead()">Atacar</button>

                    </div>
                </div>
            </div>

        </div>
    </body>
</html>